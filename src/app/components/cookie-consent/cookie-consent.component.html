@if (isVisible && !isCustomizing) {
  <div class="cookie-banner" role="dialog" aria-live="polite">
    <div class="cookie-content">
      <div class="cookie-text">
       {{getText('Usamos cookies para mejorar tu experiencia. Puedes aceptar todas, personalizar tus preferencias o rechazar las no esenciales.','We use cookies to improve your experience. You can accept all of them, customize your preferences, or reject non-essential cookies.')}} 
      </div>
      <div class="cookie-actions">
        <button class="btn secondary" (click)="rejectAll()">{{getText('Rechazar','Reject')}} </button>
        <button class="btn outline" (click)="openCustomize()">{{getText('Personalizar','Customize')}} </button>
        <button class="btn primary" (click)="acceptAll()">{{getText('Aceptar todas','Accept All')}}</button>
      </div>
    </div>
  </div>
}

@if (isCustomizing) {
  <div class="cookie-overlay" role="dialog" aria-modal="true">
    <div class="cookie-modal" role="document">
      <div class="modal-header">
        <h3 class="modal-title">{{getText('Preferencias de cookies','Cookies Preferences')}} </h3>
        <button class="icon-btn" (click)="goBack()" aria-label="Cerrar">×</button>
      </div>
      <div class="modal-body">
        <p class="muted">{{getText('Selecciona los tipos de cookies que deseas permitir. Puedes cambiar tu elección en cualquier momento.',' Select the types of cookies you want to allow. You can change your choice at any time.')}} </p>

        <div class="section">
          <div class="row">
            <div class="col">
              <div class="title">{{getText('Necesarias','Necessary')}} </div>
              <div class="desc">{{getText('Requeridas para el funcionamiento básico del sitio y para recordar tus preferencias esenciales.','Required for basic site functionality and to remember your essential preferences')} </div>
            </div>
            <div class="col-auto">
              <label class="switch disabled">
                <input type="checkbox" checked disabled />
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="row">
            <div class="col">
              <div class="title">{{getText('Analíticas','Analytics')}} </div>
              <div class="desc">{{getText('Nos ayudan a entender cómo se utiliza el sitio para mejorar su rendimiento y experiencia','They help us understand how the site is used to improve your performance and experience.')}} </div>
            </div>
            <div class="col-auto">
              <label class="switch">
                <input type="checkbox" [(ngModel)]="preferences.analytics" />
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="row">
            <div class="col">
              <div class="title">Marketing</div>
              <div class="desc">{{getText('Se utilizan para ofrecer contenidos y anuncios personalizados en función de tus intereses','They are used to offer personalized content and ads based on your interests.')}} </div>
            </div>
            <div class="col-auto">
              <label class="switch">
                <input type="checkbox" [(ngModel)]="preferences.marketing" />
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="policies">
          <a routerLink="/policy-cookies" rel="noopener">{{getText('Política de cookies','Cookies Policy')}} </a>
          <span>·</span>
          <a routerLink="/privacy-policy" rel="noopener">{{getText('Política de privacidad','Privacy Policy')}} </a>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn outline" (click)="goBack()">{{getText('Cancelar','Cancel')}} </button>
        <button class="btn primary" (click)="saveCustom()">{{getText('Guardar preferencias','Save preferences')}} </button>
      </div>
    </div>
  </div>
}

@if (!isVisible) {
  <button class="cookie-fab" (click)="openFromFab()" aria-label="Abrir preferencias de cookies">
    <i class="bi bi-cookie"></i>
  </button>
}


